---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const entries = (await getCollection("delta")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const rendered = await Promise.all(
  entries.map(async (entry) => ({
    entry,
    ...(await entry.render()),
  }))
);
---

<BaseLayout title="1% Delta | Personal Archive">
  <h1>1% Delta (Daily / Frequent Writing)</h1>
  <p class="meta">Reverse chronological</p>

  <section class="list">
    {rendered.length === 0 ? (
      <article class="card">
        <p>No entries yet.</p>
      </article>
    ) : (
      rendered.map(({ entry, Content }) => (
        <article class="card">
          <h2>{entry.data.title}</h2>
          <Content />
        </article>
      ))
    )}
  </section>
</BaseLayout>
